---
name: clarify
description: 작업 요구사항을 명확히 하기 위한 질문-답변 프로세스
allowed-tools: Read, Glob, Grep, AskUserQuestion, Task, EnterPlanMode
model: claude-opus-4-5-20251101
argument-hint: /clarify <작업 요청>
---

- $ARGUMENTS: 사용자의 작업 요청 (예: "사용자 목록에 검색 기능 추가")

## 명령 설명

사용자의 작업 요청을 분석하고, 필요한 정보를 질문하여 명확한 요구사항을 도출합니다. 질문-답변을 반복하며 요구사항이 명확해지면 작업 계획을 수립합니다.

## 실행 단계

### 1. 작업 유형 파악

사용자의 요청을 분석하여 작업 유형을 분류:

- **새 기능**: 기존에 없던 기능 추가
- **버그 수정**: 잘못된 동작 수정
- **리팩토링**: 동작은 유지하고 코드 개선
- **UI 변경**: 디자인/레이아웃 수정

### 2. 관련 코드 탐색

Task tool (Explore subagent)를 사용하여:

- 관련 파일/컴포넌트 파악
- 기존 구현 패턴 확인
- 영향 받는 범위 분석

### 3. 핵심 질문 (AskUserQuestion 사용)

작업 유형에 따라 적절한 질문을 선택하여 진행합니다. 한 번에 1-2개 질문만 하고, 답변을 받은 후 추가 질문을 진행합니다.

#### 새 기능인 경우:

1차 질문:

- "이 기능의 주요 사용 시나리오는 무엇인가요?"
- "UI는 어디에 위치하나요?" (기존 컴포넌트 내 vs 새 컴포넌트)

2차 질문 (1차 답변 기반):

- "예외 상황(에러, 빈 값, 로딩 등)은 어떻게 처리할까요?"
- "이 기능의 MVP 범위는 어디까지인가요? (나중에 추가할 것은?)"

#### 버그 수정인 경우:

1차 질문:

- "현재 어떻게 동작하나요?" (현상)
- "어떻게 동작해야 하나요?" (기대 결과)

2차 질문 (1차 답변 기반):

- "재현 방법이나 특정 조건이 있나요?"
- "관련된 다른 기능에 영향이 있나요?"

#### 리팩토링인 경우:

1차 질문:

- "왜 변경이 필요한가요?" (성능, 가독성, 확장성)
- "기존 동작은 100% 유지되어야 하나요?"

2차 질문 (1차 답변 기반):

- "영향 받는 범위는 어디까지인가요?"
- "테스트는 어떻게 검증할까요?"

### 4. 요구사항 정리

수집한 정보를 바탕으로 다음 형식으로 정리하여 출력:

```markdown
## 작업 요약

- **유형**: [새 기능 / 버그 수정 / 리팩토링 / UI 변경]
- **목적**: [한 줄 요약]
- **위치**: [영향 받는 컴포넌트/파일]

## 상세 요구사항

1. [요구사항 1]
2. [요구사항 2] ...

## 예외 처리

- [케이스 1]: [처리 방법]
- [케이스 2]: [처리 방법]

## 범위 제한

- **포함**: [이번에 할 것]
- **제외**: [나중에 할 것]

## 완료 조건

- [ ] [조건 1]
- [ ] [조건 2]
```

### 5. 사용자 확인

정리된 요구사항을 사용자에게 보여주고 AskUserQuestion으로 확인 요청:

- "요구사항이 맞나요?"
- 옵션: "맞습니다, 작업을 시작해주세요" / "수정이 필요합니다"

수정이 필요하면 수정 내용을 반영하고 다시 확인.

### 6. 작업 시작

사용자가 승인하면:

- EnterPlanMode를 사용하여 구현 계획 수립
- 계획 승인 후 작업 진행

## 질문 가이드라인

1. **한 번에 너무 많이 묻지 않기**: 1-2개 질문 후 답변을 받고 진행
2. **구체적으로 묻기**: "어떻게 할까요?" 대신 "A 방식과 B 방식 중 어떤 것을 원하시나요?"
3. **맥락 제공하기**: 왜 이 질문이 필요한지 간단히 설명
4. **기본값 제안하기**: 일반적인 선택지가 있으면 "(권장)" 표시

## 예시

**사용자**: `/clarify 사용자 목록에 검색 기능 추가해줘`

**Claude 1차 응답**:

> 사용자 목록 검색 기능을 추가하겠습니다.
>
> 현재 UserRegisterModal에 사용자 목록이 있는 것을 확인했습니다.
>
> 질문 1: 검색 대상은 무엇인가요?
>
> - Jira ID로 검색 (권장)
> - 표시 이름으로 검색
> - 둘 다
>
> 질문 2: 검색 방식은 어떻게 할까요?
>
> - 실시간 필터링 (입력할 때마다 필터) (권장)
> - 검색 버튼 클릭 시 필터

**사용자**: "둘 다, 실시간으로"

**Claude 2차 응답**:

> 이해했습니다. 추가 질문이 있습니다.
>
> 질문 3: 검색 결과가 없을 때 어떻게 표시할까요?
>
> - "검색 결과가 없습니다" 메시지 표시 (권장)
> - 빈 목록만 표시
>
> 질문 4: 검색어 하이라이팅이 필요한가요?
>
> - 필요 없음 (권장)
> - 매칭되는 텍스트 하이라이팅

**사용자**: "메시지 표시, 하이라이팅 필요 없음"

**Claude 최종 정리**:

> ## 작업 요약
>
> - **유형**: 새 기능
> - **목적**: 사용자 목록에서 ID 또는 이름으로 실시간 검색
> - **위치**: UserRegisterModal.tsx
>
> ## 상세 요구사항
>
> 1. 검색 입력 필드 추가 (목록 상단)
> 2. Jira ID와 표시 이름 모두 검색 대상
> 3. 입력 시 실시간 필터링
> 4. 검색 결과 없으면 "검색 결과가 없습니다" 표시
>
> ## 범위 제한
>
> - **포함**: 기본 검색 기능
> - **제외**: 하이라이팅, 검색 히스토리
>
> ## 완료 조건
>
> - [ ] 검색 입력 필드가 표시됨
> - [ ] ID 또는 이름 입력 시 목록이 필터링됨
> - [ ] 빈 결과 시 메시지 표시됨
>
> 요구사항이 맞나요?

**사용자**: "맞습니다"

**Claude**: EnterPlanMode로 구현 계획 수립 시작
